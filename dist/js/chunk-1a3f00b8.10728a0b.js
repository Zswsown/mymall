(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a3f00b8"],{1700:function(t,e,s){},"22cb":function(t,e,s){t.exports=s.p+"img/recommend_bg.794b6628.jpg"},2313:function(t,e,s){"use strict";var i=s("1700"),o=s.n(i);o.a},"2a87":function(t,e,s){},3931:function(t,e,s){"use strict";var i=s("89bf"),o=s.n(i);o.a},"5c37":function(t,e,s){},"860c":function(t,e,s){},"89bf":function(t,e,s){},"8a9d":function(t,e,s){"use strict";var i=s("2a87"),o=s.n(i);o.a},"91b2":function(t,e,s){"use strict";var i=s("95d8"),o=s.n(i);o.a},"95d8":function(t,e,s){},"977b":function(t,e,s){},"9bd0":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tabControl"},t._l(t.titles,(function(e,i){return s("div",{staticClass:"tabControlItem",class:{active:t.currentIndex===i},on:{click:function(e){return t.itemClick(i)}}},[s("span",[t._v(t._s(e))])])})),0)},o=[],n={name:"TabControl",data(){return{currentIndex:0}},props:{titles:{type:Array,default(){return[]}}},methods:{itemClick(t){this.currentIndex=t,this.$emit("tabControlClick",t)}}},r=n,a=(s("3931"),s("2877")),l=Object(a["a"])(r,i,o,!1,null,"627e9047",null);e["a"]=l.exports},b3d7:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"home"}},[s("nav-bar",{ref:"homenavbar",staticClass:"home-nav"},[s("div",{attrs:{slot:"nav-center"},slot:"nav-center"},[t._v("小商城")])]),s("tab-control",{directives:[{name:"show",rawName:"v-show",value:t.isToggleTabControlShow,expression:"isToggleTabControlShow"}],ref:"toggletabcontrol",staticClass:"toggletabcontrol",attrs:{titles:t.titles},on:{tabControlClick:t.tabControlClick}}),s("scroll",{ref:"scroll",staticClass:"scrollContent",attrs:{probeType:3,"pull-to-load":!0},on:{scroll:t.scrollContent,pullingUp:t.loadMore}},[s("home-swiper",{ref:"homeswiper",attrs:{banners:t.banners},on:{homeSwiperImageLoad:t.homeSwiperImageLoad}}),s("home-recommend",{attrs:{recommends:t.recommends}}),s("home-feature"),s("tab-control",{ref:"tabcontrol",attrs:{titles:t.titles},on:{tabControlClick:t.tabControlClick}}),s("goods-list",{ref:"homegoodslist",attrs:{goodsList:t.showGoodsList}})],1),s("back-to-top",{directives:[{name:"show",rawName:"v-show",value:t.isShowBackToTop,expression:"isShowBackToTop"}],nativeOn:{click:function(e){return t.backToTop(e)}}})],1)},o=[],n=s("a7ac"),r=s("5d17"),a=s("9bd0"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"goodsList"},t._l(t.goodsList,(function(t,e){return s("goods-list-item",{key:e,staticClass:"goodsItem",attrs:{goodsItem:t}})})),1)},c=[],h=s("1eb0"),u={name:"GoodsList",components:{GoodsListItem:h["a"]},props:{goodsList:{type:Array,default(){return[]}}}},d=u,m=(s("8a9d"),s("2877")),f=Object(m["a"])(d,l,c,!1,null,"aa9862b0",null),p=f.exports,b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("swiper",{ref:"swiper"},t._l(t.banners,(function(e,i){return s("swiper-item",{key:i},[s("a",{attrs:{href:e.link}},[s("img",{attrs:{src:e.image,alt:""},on:{load:t.homeSwiperImageLoad}})])])})),1)},g=[],w=s("dc2c"),v={name:"HomeSwiper",data(){return{isFirstLoad:!1}},components:{Swiper:w["a"],SwiperItem:w["b"]},props:{banners:{type:Array,default(){return[]}}},methods:{homeSwiperImageLoad(){this.isFirstLoad||(this.$emit("homeSwiperImageLoad"),this.isFirstLoad=!0)}}},C=v,I=Object(m["a"])(C,b,g,!1,null,"04f9b00d",null),T=I.exports,_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"homeRecommend"}},t._l(t.recommends,(function(e,i){return s("div",{key:i,staticClass:"homeRecommendItem"},[s("a",{attrs:{href:e.link}},[s("img",{attrs:{src:e.image,alt:""}}),s("div",{staticClass:"homeRecommendItemTitle"},[t._v(t._s(e.title))])])])})),0)},x=[],S={name:"HomeRecommend",props:{recommends:{type:Array,default(){return[]}}}},y=S,k=(s("f997"),Object(m["a"])(y,_,x,!1,null,"2422c5e2",null)),L=k.exports,$=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},E=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"homeFeature"}},[i("a",{attrs:{href:"http://act.mogujie.com/zzlx67"}},[i("img",{attrs:{src:s("22cb"),alt:""}})])])}],O={name:"HomeFeature"},W=O,j=(s("d3f6"),Object(m["a"])(W,$,E,!1,null,"148cac84",null)),D=j.exports,H=s("eecb"),P=s("1bab");function N(){return Object(P["a"])({url:"/home/multidata"})}function R(t,e){return Object(P["a"])({url:"/home/data",params:{type:t,page:e}})}var B={name:"Home",data(){return{banners:[],recommends:[],titles:["流行","新款","精选"],POP:"pop",NEW:"new",SELL:"sell",goodsList:{pop:{page:0,list:[]},new:{page:0,list:[]},sell:{page:0,list:[]}},currentTitleEng:"pop",tabControlOffsetTop:0,isToggleTabControlShow:!1,leavePotion:{x:0,y:0},currentScrollY:0}},mixins:[H["b"],H["a"]],components:{NavBar:n["a"],Scroll:r["a"],TabControl:a["a"],GoodsList:p,HomeSwiper:T,HomeRecommend:L,HomeFeature:D},created(){this._getMultiData(),this._getHomeData("pop"),this._getHomeData("new"),this._getHomeData("sell")},mounted(){},deactivated(){this.leavePotion=this.$refs.scroll.getScrollPosition(),this.$bus.$off("itemImageLoad",this.goodsItemImageLoad)},activated(){this.$refs.scroll.scrollTo(this.leavePotion.x,this.leavePotion.y,0),this.$refs.scroll.refresh()},computed:{showGoodsList(){return this.goodsList[this.currentTitleEng].list}},methods:{_getMultiData(){N().then(t=>{this.banners=t.data.data.banner.list,this.recommends=t.data.data.recommend.list}).catch(t=>{console.log(t)})},_getHomeData(t){this.goodsList[t].page++,R(t,this.goodsList[t].page).then(e=>{this.goodsList[t].list.push(...e.data.data.list),this.$refs.scroll.finishPullUp()})},tabControlClick(t){switch(t){case 0:this.currentTitleEng=this.POP;break;case 1:this.currentTitleEng=this.NEW;break;case 2:this.currentTitleEng=this.SELL;break}this.$refs.tabcontrol.currentIndex=t,this.$refs.toggletabcontrol.currentIndex=t,this.isToggleTabControlShow&&this.currentScrollY>this.tabControlOffsetTop&&this.$refs.scroll.scrollTo(0,-this.tabControlOffsetTop,300)},scrollContent(t){this.getBackToTopShow(t),this.isToggleTabControlShow=-t.y>this.tabControlOffsetTop,this.currentScrollY=-t.y},loadMore(){this._getHomeData(this.currentTitleEng)},homeSwiperImageLoad(){this.tabControlOffsetTop=this.$refs.tabcontrol.$el.offsetTop}}},M=B,F=(s("2313"),Object(m["a"])(M,i,o,!1,null,"68a8db2c",null));e["default"]=F.exports},d00d:function(t,e,s){"use strict";var i=s("860c"),o=s.n(i);o.a},d3f6:function(t,e,s){"use strict";var i=s("977b"),o=s.n(i);o.a},dc2c:function(t,e,s){"use strict";s.d(e,"a",(function(){return c})),s.d(e,"b",(function(){return p}));var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"zswsown-swiper"}},[s("div",{staticClass:"swiper",on:{touchstart:t.touchStart,touchmove:t.touchMove,touchend:t.touchEnd}},[t._t("default")],2),t._t("indicator"),s("div",{staticClass:"indicator"},[t.showIndicator&&t.swiperItemCount>1?t._t("indicator",t._l(t.swiperItemCount,(function(e,i){return s("div",{key:i,staticClass:"indi-item",class:{active:i===t.currentIndex-1}})}))):t._e()],2)],2)},o=[],n={name:"Swiper",props:{interval:{type:Number,default:3e3},animDuration:{type:Number,default:300},moveRatio:{type:Number,default:.25},showIndicator:{type:Boolean,default:!0}},data:function(){return{swiperItemCount:0,totalWidth:0,swiperStyle:{},currentIndex:1,scrolling:!1}},mounted:function(){setTimeout(()=>{this.handleDom(),this.startTimer()},3e3)},methods:{startTimer:function(){this.playTimer=window.setInterval(()=>{this.currentIndex++,this.scrollContent(-this.currentIndex*this.totalWidth)},this.interval)},stopTimer:function(){window.clearInterval(this.playTimer)},scrollContent:function(t){this.scrolling=!0,this.swiperStyle.transition="transform "+this.animDuration+"ms",this.setTransform(t),this.checkPosition(),this.scrolling=!1},checkPosition:function(){window.setTimeout(()=>{this.swiperStyle.transition="0ms",this.currentIndex>=this.swiperItemCount+1?(this.currentIndex=1,this.setTransform(-this.currentIndex*this.totalWidth)):this.currentIndex<=0&&(this.currentIndex=this.swiperItemCount,this.setTransform(-this.currentIndex*this.totalWidth)),this.$emit("transitionEnd",this.currentIndex-1)},this.animDuration)},setTransform:function(t){this.swiperStyle.transform=`translate3d(${t}px, 0, 0)`,this.swiperStyle["-webkit-transform"]=`translate3d(${t}px), 0, 0`,this.swiperStyle["-ms-transform"]=`translate3d(${t}px), 0, 0`},handleDom:function(){let t=document.querySelector(".swiper"),e=t.getElementsByClassName("swiperItem");if(this.swiperItemCount=e.length,this.swiperItemCount>1){let s=e[0].cloneNode(!0),i=e[this.swiperItemCount-1].cloneNode(!0);t.insertBefore(i,e[0]),t.appendChild(s),this.totalWidth=t.offsetWidth,this.swiperStyle=t.style}this.setTransform(-this.totalWidth)},touchStart:function(t){this.scrolling||(this.stopTimer(),this.startX=t.touches[0].pageX)},touchMove:function(t){this.currentX=t.touches[0].pageX,this.distance=this.currentX-this.startX;let e=-this.currentIndex*this.totalWidth,s=this.distance+e;this.setTransform(s)},touchEnd:function(t){let e=Math.abs(this.distance);0!==this.distance&&(this.distance>0&&e>this.totalWidth*this.moveRatio?this.currentIndex--:this.distance<0&&e>this.totalWidth*this.moveRatio&&this.currentIndex++,this.scrollContent(-this.currentIndex*this.totalWidth),this.startTimer())},previous:function(){this.changeItem(-1)},next:function(){this.changeItem(1)},changeItem:function(t){this.stopTimer(),this.currentIndex+=t,this.scrollContent(-this.currentIndex*this.totalWidth),this.startTimer()}}},r=n,a=(s("d00d"),s("2877")),l=Object(a["a"])(r,i,o,!1,null,"276dfabf",null),c=l.exports,h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"swiperItem"},[t._t("default")],2)},u=[],d={name:"SwiperItem"},m=d,f=(s("91b2"),Object(a["a"])(m,h,u,!1,null,"28b55c53",null)),p=f.exports},f997:function(t,e,s){"use strict";var i=s("5c37"),o=s.n(i);o.a}}]);
//# sourceMappingURL=chunk-1a3f00b8.10728a0b.js.map